#!/usr/bin/bash

  check_number_of_args() {
  if [ "$must_n" -ne "$n_inParams" ]
	then echo -e "Error!\nMust be $must_n parameters"
 	exit 1
  fi
}

  check_absolute_way() {
  if [ ! -d $abs_way ]
	  then echo "Wrong absolute way!"
	  exit 1
  fi
}

  is_nbr() {
   re='^[0-9]+$'
   if ! [[ $1 =~ $re ]]
       then return 100
   fi
   return 0;
  }

  check_nbr_dirs_and_files() {
   if [[ "$n_dirs" -eq 0 || "$n_files" -eq 0 ]]
       then echo "The number of files or directories must be > 0"
          exit 1
   fi

   is_nbr $n_dirs
   if [ $? -eq 100 ]
      then echo "Wrong directories-number!" ; exit 1
   fi

   is_nbr $n_files
   if [ $? -eq 100 ]
      then echo "Wrong files-number!" ; exit 1
   fi
  }

check_letters() {
  re='^[a-z]+$'
  if ! [[ $d_letters =~ $re ]]
      then echo "Wrong letters for directories!" ; exit 1
  fi
 
  re='^[a-z]+([.][a-z]+)$'
  if ! [[ $f_letters =~ $re ]]
      then echo "Wrong letters for files" ; exit 1
  fi

  local size_d_letters=${#d_letters}

  #method1: split f_letters by "."  Find letters for file-names:
  IFS='.' read -ra letters_f_name <<< "$f_letters"
  #echo $letters_f_name
  local size_f_name=${#letters_f_name}

  #method2: split f_letters by "." Find letters for file-extensions
  local delimitter="."
  letters_f_ext=${f_letters##*$delimitter}
  #echo $letters_f_ext
  local size_f_ext=${#letters_f_ext}

  if [[ $size_d_letters -gt 7 || $size_f_name -gt 7 ]]
     then echo "List of letters must be not great than 7"; exit 1
  fi

  if [ $size_f_ext -gt 3 ]
     then echo "List of letters for extension must be not great than 3"
     exit 1
  fi
}

 check_size_param()
 {
    local suffix="kb"
    file_size=${file_size%"$suffix"}
    re='^[0-9]+$'
    if ! [[ $file_size =~ $re ]]
        then echo "Wrong size of files"; exit 1
    fi  
 }

  check_args() {
   check_number_of_args
   check_absolute_way
   check_nbr_dirs_and_files
   check_letters
   check_size_param
}

