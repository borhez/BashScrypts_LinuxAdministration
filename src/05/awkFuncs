#!/bin/bash

nFiles=5

trap "echo -e 'Not all Logs in ../04/.\nExit Error'; exit 1" TERM
ftCheckExistingFiles()
{
	local ret=""
	for (( i=1; i<=$nFiles; i++ ))
	do
		if [[ ! -f "../04/log$i.txt" ]]
		then kill -s TERM $$
		fi
		ret=$ret" ../04/log$i.txt"
	done
	echo $ret
}

#ftMove()
#{
#	regExpr='^[log]+[1-5][.txt]+$'
#	if [[ "log2.txt" =~ $regExpr ]]
#	then echo YES; exit 0
#	else echo NO; exit 1
#	fi
#}

ftSortByCode()
{
	#local FilesForAwk=$(ftCheckExistingFiles)
	awk 'NR' ${FilesForAwk} | sort -t $' ' -k6
	#-t $'\t' задаст разделитель полей как tab.
	#По умолчанию пробел. --> можно не указывать -t $' '
	#-k6,6 для сортировки из столбца 6 в столбец 6. Также при -k6.
	#-k1n будет означать числовую сортировку 1го столбца
	#по умолчанию порядок возрастания. -k6r -k6,6r -k1nr для убывания
}

ftUniqIP()
{
	awk '{ if (!($1 in a)) a[$1] = $1; } END { for (i in a) print a[i]}' $FilesForAwk
	#Следующие 2 команды  выводят уникальные IP, но отсортированные!
	#awk '{print $1}' ${FilesForAwk}| sort -u
        #awk '{print $1}' ${FilesForAwk}|sort| uniq -c
	#-c для каждого уникального IP покажет количество дубликатов
	#Просуммировать этот столбец можно:
	# awk '{ret+=$1} END {print ret}'. Совпадает с числом всех IP
}

ftErrorRequests()
{
	echo "Three"
}

ftUniqIPinErrorRequests()
{
	echo "Four"
}
